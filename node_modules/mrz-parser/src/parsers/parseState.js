const STATES = require('../generated/states');

const cleanText = require('./cleanText');

module.exports = function parseState(source) {
  const newSource = cleanText(source).replace(/0/g, 'O')
    .replace(/8/g, 'R');

  const state = STATES[newSource];
  if (!state) {
    throw new Error(`invalid state code: ${newSource}`);
  }
  return {
    value: newSource,
    start: 0,
    end: newSource.length,
  };
};
